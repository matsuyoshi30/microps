#+TITLE: memo

* プロトコル管理

- ネットワークデバイスはインターネット（ネットワーク）層のデータ（IP/IPv6/ARPなど）が運ばれる
  - どのプロトコルのデータかはリンクプロトコルからわかる
  - Ethernet であればヘッダに16ビットのタイプ番号がある
    - https://www.iana.org/assignments/ieee-802-numbers/ieee-802-numbers.xhtml#ieee-802-numbers-1
- プロトコルごとに受信キューでデータの受け取りを管理
- デバイスドライバがデータを受信して割り込みが発生して割り込みハンドラにデータが渡される
  - 割り込みハンドラがプロトコルに応じて適切な関数に渡す
    - プロトコル番号をもとにプロトコルを特定
    - プロトコルの受信キューにデータをエンキュー
    - 関数を呼び出す
